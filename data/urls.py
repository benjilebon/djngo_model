from django.conf.urls import url, include
from django.http import HttpResponseRedirect
from . import views, apis
from django.contrib.auth import views as auth_views

urlpatterns = [
    # url(r'^$',lambda r: HttpResponseRedirect('login')),
    # url(r'^index',lambda r: HttpResponseRedirect('login')),
    url(r'^$',views.root),
    url(r'^index$',views.index),
    url(r'^login$',auth_views.LoginView.as_view(template_name='login.html'),name='login'),
    # url(r'^signin',views.signin),
    url(r'^admin$',views.admin),
    # url(r'^base$',views.base),
    url(r'^dashboard$',views.dashboard),
    url(r'^graphics$',views.graphics),
    url(r'^analysis$',views.analysis),
    url(r'^api/analysis/launch$', apis.launchAnalysis.as_view()),
    url(r'^kubex$',views.kubex),
    url(r'^api/kubex/status',apis.getKubexConfig.as_view()),
    url(r'^api/kubex/config',apis.setKubexConfig.as_view()),
    url(r'^datasets$',views.datasets),
    url(r'^inbox$',views.inbox),
    url(r'^api/algorithm/(?P<algo_id>\d+)$',apis.getAlgorithmParameters.as_view()),
    url(r'^api/algorithm/list/$',apis.getAlgorithms.as_view()),
    url(r'^tasks$',views.tasks),
    url(r'^alerts$',views.alerts),
    url(r'^api/alerts/delete/(?P<alert_id>\d+)$',apis.deleteAlert.as_view()),
    url(r'^profile$',views.profile),
    url(r'^settings$',views.settings),
    url(r'^logout$',auth_views.LogoutView.as_view(),name='logout'),# {'template_name': 'login.html'}),
    url(r'^search$',apis.searchQuery.as_view()),
    url(r'^support$',views.support),
    url(r'^support/add$',apis.addTicket.as_view()),
    # url(r'^manual$',views.manual),
    url(r'^manual$',apis.getManual.as_view()),
    # url(r'^test-(\w+).html',views.test),
    url(r'^api/dataset/list/$',apis.getDatasetList.as_view()),
    url(r'^api/dataset/add$',apis.addDataset.as_view()),
    url(r'^api/dataset/edit$',apis.editDataset.as_view()),
    url(r'^api/dataset/(?P<data_id>\d+)$',apis.getDatasetMetadata.as_view()),
    url(r'^api/dataset/delete/(?P<data_id>\d+)$', apis.deleteDataset.as_view()),
    url(r'^api/dataset/column$', apis.getDatasetColumns.as_view()),
    url(r'^api/dataset/search', apis.searchDataset.as_view()),
    url(r'^api/message/add',apis.addMessage.as_view()),
]
